package br.com.lunacore.lunalire;

import java.util.HashMap;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.controllers.Controller;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.utils.XmlReader;
import com.badlogic.gdx.utils.XmlReader.Element;

public class LireStateManager {
	
	HashMap<Integer, LireScene> scenes;	
	int currentScene = -1;
	
	public LireStateManager() {
		scenes = new HashMap<Integer, LireScene>();
		XmlReader reader = new XmlReader();
		Element root = reader.parse(Gdx.files.internal("project.ll"));
		
		//Carrega as cenas a partir do arquivo .ll
		
		for(Element sc : root.getChildrenByName("scene")) {
			//Pegar alguma configuração de startScene
			//por enquanto ele carrega na primeira
			
			String loc = sc.getAttribute("loc");
			System.out.println("Loading scene " + loc);
			
			Element ss = reader.parse(Gdx.files.internal(loc));

			LireScene lr = new LireScene(ss);

			int ID = Integer.parseInt(ss.getAttribute("ID"));
			scenes.put(ID, lr);
			if(currentScene == -1) {
				currentScene = ID;
			}
		}
	}
	
	public void render(SpriteBatch sb) {
		if(currentScene != -1) {
			scenes.get(currentScene).render(sb);
		}
	}

	public void update(float delta) {
		if(currentScene != -1) {
			scenes.get(currentScene).update(delta);
		}
	}

	public void dispose() {
		
	}

	public void keyDown(int keycode) {
		// TODO Auto-generated method stub
		
	}

	public void keyUp(int keycode) {
		// TODO Auto-generated method stub
		
	}

	public void keyTyped(char character) {
		// TODO Auto-generated method stub
		
	}

	public void touchDown(int screenX, int screenY, int pointer, int button) {
		// TODO Auto-generated method stub
		
	}

	public void touchUp(int screenX, int screenY, int pointer, int button) {
		// TODO Auto-generated method stub
		
	}

	public void touchDragged(int screenX, int screenY, int pointer) {
		// TODO Auto-generated method stub
		
	}

	public void mouseMoved(int screenX, int screenY) {
		// TODO Auto-generated method stub
		
	}

	public void scrolled(int amount) {
		// TODO Auto-generated method stub
		
	}

	public void connected(Controller controller) {
		// TODO Auto-generated method stub
		
	}

	public void disconnected(Controller controller) {
		// TODO Auto-generated method stub
		
	}

	public void buttonDown(Controller controller, int buttonCode) {
		// TODO Auto-generated method stub
		
	}

}
